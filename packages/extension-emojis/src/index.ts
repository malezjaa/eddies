import { textInputRule, markPasteRule, Mark } from "@tiptap/core";

interface EmojiReplacement {
  find: RegExp;
  replace: string;
}

const emojiReplacements: EmojiReplacement[] = [
  { find: /:\* $/, replace: "ðŸ˜˜ " },
  { find: /=\* $/, replace: "ðŸ˜˜ " },
  { find: /:\) $/, replace: "ðŸ™‚ " },
  { find: /=\] $/, replace: "ðŸ™‚ " },
  { find: /=\) $/, replace: "ðŸ™‚ " },
  { find: /:\] $/, replace: "ðŸ™‚ " },
  { find: /:X $/, replace: "ðŸ˜¶ " },
  { find: /:# $/, replace: "ðŸ˜¶ " },
  { find: /=X $/, replace: "ðŸ˜¶ " },
  { find: /=x $/, replace: "ðŸ˜¶ " },
  { find: /:x $/, replace: "ðŸ˜¶ " },
  { find: /=# $/, replace: "ðŸ˜¶ " },
  { find: /:O $/, replace: "ðŸ˜® " },
  { find: /:o $/, replace: "ðŸ˜® " },
  { find: /:P $/, replace: "ðŸ˜› " },
  { find: /=P $/, replace: "ðŸ˜› " },
  { find: /:p $/, replace: "ðŸ˜›  " },
  { find: /=p $/, replace: "ðŸ˜› " },
  { find: /:Ãž $/, replace: "ðŸ˜› " },
  { find: /:Ã¾ $/, replace: "ðŸ˜› " },
  { find: /:b $/, replace: "ðŸ˜› " },
  { find: /d: $/, replace: "ðŸ˜› " },
  { find: /-___- $/, replace: "ðŸ˜‘ " },
  { find: /:'-\) $/, replace: "ðŸ˜‚ " },
  { find: /':-\) $/, replace: "ðŸ˜… " },
  { find: /':-D $/, replace: "ðŸ˜… " },
  { find: />:-\) $/, replace: "ðŸ˜† " },
  { find: /-__- $/, replace: "ðŸ˜‘ " },
  { find: /':-\( $/, replace: "ðŸ˜“ " },
  { find: /:'-\( $/, replace: "ðŸ˜¢ " },
  { find: />:-\( $/, replace: "ðŸ˜  " },
  { find: /O:-\) $/, replace: "ðŸ˜‡ " },
  { find: /0:-3 $/, replace: "ðŸ˜‡ " },
  { find: /0:-\) $/, replace: "ðŸ˜‡ " },
  { find: /0;\^\) $/, replace: "ðŸ˜‡ " },
  { find: /O;-\) $/, replace: "ðŸ˜‡ " },
  { find: /0;-\) $/, replace: "ðŸ˜‡ " },
  { find: /O:-3 $/, replace: "ðŸ˜‡ " },
  { find: /:'\) $/, replace: "ðŸ˜‚ " },
  { find: /:-D $/, replace: "ðŸ˜ƒ " },
  { find: /':\) $/, replace: "ðŸ˜… " },
  { find: /'=\) $/, replace: "ðŸ˜… " },
  { find: /':D $/, replace: "ðŸ˜… " },
  { find: /'=D $/, replace: "ðŸ˜… " },
  { find: />:\) $/, replace: "ðŸ˜† " },
  { find: />;\) $/, replace: "ðŸ˜† " },
  { find: />=\) $/, replace: "ðŸ˜† " },
  { find: /;-\) $/, replace: "ðŸ˜‰ " },
  { find: /\*-\) $/, replace: "ðŸ˜‰ " },
  { find: /;-\] $/, replace: "ðŸ˜‰ " },
  { find: /;\^\) $/, replace: "ðŸ˜‰ " },
  { find: /B-\) $/, replace: "ðŸ˜Ž " },
  { find: /8-\) $/, replace: "ðŸ˜Ž " },
  { find: /B-D $/, replace: "ðŸ˜Ž " },
  { find: /8-D $/, replace: "ðŸ˜Ž " },
  { find: /:-\* $/, replace: "ðŸ˜˜ " },
  { find: /:\^\* $/, replace: "ðŸ˜˜ " },
  { find: /:-\) $/, replace: "ðŸ™‚ " },
  { find: /-_- $/, replace: "ðŸ˜‘ " },
  { find: /:-X $/, replace: "ðŸ˜¶ " },
  { find: /:-# $/, replace: "ðŸ˜¶ " },
  { find: /:-x $/, replace: "ðŸ˜¶ " },
  { find: />.< $/, replace: "ðŸ˜£ " },
  { find: /:-O $/, replace: "ðŸ˜® " },
  { find: /:-o $/, replace: "ðŸ˜® " },
  { find: /O_O $/, replace: "ðŸ˜® " },
  { find: />:O $/, replace: "ðŸ˜® " },
  { find: /:-P $/, replace: "ðŸ˜› " },
  { find: /:-p $/, replace: "ðŸ˜› " },
  { find: /:-Ãž $/, replace: "ðŸ˜› " },
  { find: /:-Ã¾ $/, replace: "ðŸ˜› " },
  { find: /:-b $/, replace: "ðŸ˜› " },
  { find: />:P $/, replace: "ðŸ˜œ " },
  { find: /X-P $/, replace: "ðŸ˜œ " },
  { find: /x-p $/, replace: "ðŸ˜œ " },
  { find: /':\( $/, replace: "ðŸ˜“ " },
  { find: /'=\( $/, replace: "ðŸ˜“ " },
  { find: />:\\ $/, replace: "ðŸ˜• " },
  { find: />:\/ $/, replace: "ðŸ˜• " },
  { find: /:-\/ $/, replace: "ðŸ˜• " },
  { find: /:-. $/, replace: "ðŸ˜• " },
  { find: />:\[ $/, replace: "ðŸ˜ž " },
  { find: /:-\( $/, replace: "ðŸ˜ž " },
  { find: /:-\[ $/, replace: "ðŸ˜ž " },
  { find: /:'\( $/, replace: "ðŸ˜¢ " },
  { find: /;-\( $/, replace: "ðŸ˜¢ " },
  { find: /#-\) $/, replace: "ðŸ˜µ " },
  { find: /%-\) $/, replace: "ðŸ˜µ " },
  { find: /X-\) $/, replace: "ðŸ˜µ " },
  { find: />:\( $/, replace: "ðŸ˜  " },
  { find: /0:3 $/, replace: "ðŸ˜‡ " },
  { find: /0:\) $/, replace: "ðŸ˜‡ " },
  { find: /O:\) $/, replace: "ðŸ˜‡ " },
  { find: /O=\) $/, replace: "ðŸ˜‡ " },
  { find: /O:3 $/, replace: "ðŸ˜‡ " },
  { find: /<\/3 $/, replace: "ðŸ’” " },
  { find: /:D $/, replace: "ðŸ˜ƒ " },
  { find: /=D $/, replace: "ðŸ˜ƒ " },
  { find: /;\) $/, replace: "ðŸ˜‰ " },
  { find: /\*\) $/, replace: "ðŸ˜‰ " },
  { find: /;\] $/, replace: "ðŸ˜‰ " },
  { find: /;D $/, replace: "ðŸ˜‰ " },
  { find: /B\) $/, replace: "ðŸ˜Ž " },
  { find: /8\) $/, replace: "ðŸ˜Ž " },
  { find: /:\/ $/, replace: "ðŸ˜• " },
  { find: /:\\ $/, replace: "ðŸ˜• " },
  { find: /=\/ $/, replace: "ðŸ˜• " },
  { find: /=\\ $/, replace: "ðŸ˜• " },
  { find: /:L $/, replace: "ðŸ˜• " },
  { find: /=L $/, replace: "ðŸ˜• " },
  { find: /:\( $/, replace: "ðŸ˜ž " },
  { find: /:\[ $/, replace: "ðŸ˜ž " },
  { find: /=\( $/, replace: "ðŸ˜ž " },
  { find: /;\( $/, replace: "ðŸ˜¢ " },
  { find: /D: $/, replace: "ðŸ˜¨ " },
  { find: /:\$ $/, replace: "ðŸ˜³ " },
  { find: /=\$ $/, replace: "ðŸ˜³ " },
  { find: /#-\) $/, replace: "ðŸ˜µ " },
  { find: /%-\) $/, replace: "ðŸ˜µ " },
  { find: /X-\) $/, replace: "ðŸ˜µ " },
  { find: /:@ $/, replace: "ðŸ˜  " },
  { find: /<3 $/, replace: "â¤ï¸ " },

  { find: /:heart: $/, replace: "â¤ï¸ " },
  { find: /:heartpulse: $/, replace: "ðŸ’— " },
  { find: /:heartbeat: $/, replace: "ðŸ’“ " },
  { find: /:heart_decoration: $/, replace: "ðŸ’Ÿ " },
  { find: /:two_hearts: $/, replace: "ðŸ’• " },
  { find: /:revolving_hearts: $/, replace: "ðŸ’ž " },
  { find: /:cupid: $/, replace: "ðŸ’˜ " },
  { find: /:sparkling_heart: $/, replace: "ðŸ’– " },
  { find: /:sparkles: $/, replace: "âœ¨ " },
  { find: /:star2: $/, replace: "ðŸŒŸ " },
  { find: /:dizzy: $/, replace: "ðŸ’« " },
  { find: /:boom: $/, replace: "ðŸ’¥ " },
  { find: /:collision: $/, replace: "ðŸ’¥ " },
  { find: /:anger: $/, replace: "ðŸ’¢ " },
  { find: /:exclamation: $/, replace: "â— " },
  { find: /:question: $/, replace: "â“ " },
  { find: /:grey_exclamation: $/, replace: "â• " },
  { find: /:grey_question: $/, replace: "â” " },
  { find: /:zzz: $/, replace: "ðŸ’¤ " },
  { find: /:dash: $/, replace: "ðŸ’¨ " },
  { find: /:sweat_drops: $/, replace: "ðŸ’¦ " },
  { find: /:notes: $/, replace: "ðŸŽ¶ " },
  { find: /:musical_note: $/, replace: "ðŸŽµ " },
  { find: /:fire: $/, replace: "ðŸ”¥ " },
  { find: /:poop: $/, replace: "ðŸ’© " },
  { find: /:grinning: $/, replace: "ðŸ˜€ " },
  { find: /:smiley: $/, replace: "ðŸ˜ƒ " },
  { find: /:smile: $/, replace: "ðŸ˜„ " },
  { find: /:grin: $/, replace: "ðŸ˜ " },
  { find: /:laughing: $/, replace: "ðŸ˜† " },
  { find: /:satisfied: $/, replace: "ðŸ˜† " },
  { find: /:sweat_smile: $/, replace: "ðŸ˜… " },
  { find: /:rofl: $/, replace: "ðŸ¤£ " },
  { find: /:joy: $/, replace: "ðŸ˜‚ " },
  { find: /:slightly_smiling_face: $/, replace: "ðŸ™‚ " },
  { find: /:upside_down_face: $/, replace: "ðŸ™ƒ " },
  { find: /:wink: $/, replace: "ðŸ˜‰ " },
  { find: /:blush: $/, replace: "ðŸ˜Š " },
  { find: /:innocent: $/, replace: "ðŸ˜‡ " },
  { find: /:smiling_face_with_three_hearts: $/, replace: "ðŸ¥° " },
  { find: /:heart_eyes: $/, replace: "ðŸ˜ " },
  { find: /:star_struck: $/, replace: "ðŸ¤© " },
  { find: /:kissing_heart: $/, replace: "ðŸ˜˜ " },
  { find: /:kissing: $/, replace: "ðŸ˜— " },
  { find: /:relaxed: $/, replace: "â˜ºï¸ " },
  { find: /:kissing_closed_eyes: $/, replace: "ðŸ˜š " },
  { find: /:kissing_smiling_eyes: $/, replace: "ðŸ˜™ " },
  { find: /:yum: $/, replace: "ðŸ˜‹ " },
  { find: /:stuck_out_tongue: $/, replace: "ðŸ˜› " },
  { find: /:stuck_out_tongue_winking_eye: $/, replace: "ðŸ˜œ " },
  { find: /:zany_face: $/, replace: "ðŸ¤ª " },
  { find: /:stuck_out_tongue_closed_eyes: $/, replace: "ðŸ˜ " },
  { find: /:money_mouth_face: $/, replace: "ðŸ¤‘ " },
  { find: /:hugs: $/, replace: "ðŸ¤— " },
  { find: /:hand_over_mouth: $/, replace: "ðŸ¤­ " },
  { find: /:shushing_face: $/, replace: "ðŸ¤« " },
  { find: /:thinking: $/, replace: "ðŸ¤” " },
  { find: /:zipper_mouth_face: $/, replace: "ðŸ¤ " },
  { find: /:raised_eyebrow: $/, replace: "ðŸ¤¨ " },
  { find: /:neutral_face: $/, replace: "ðŸ˜ " },
  { find: /:expressionless: $/, replace: "ðŸ˜‘ " },
  { find: /:no_mouth: $/, replace: "ðŸ˜¶ " },
  { find: /:smirk: $/, replace: "ðŸ˜ " },
  { find: /:unamused: $/, replace: "ðŸ˜’ " },
  { find: /:roll_eyes: $/, replace: "ðŸ™„ " },
  { find: /:grimacing: $/, replace: "ðŸ˜¬ " },
  { find: /:lying_face: $/, replace: "ðŸ¤¥ " },
  { find: /:relieved: $/, replace: "ðŸ˜Œ " },
  { find: /:pensive: $/, replace: "ðŸ˜” " },
  { find: /:sleepy: $/, replace: "ðŸ˜ª " },
  { find: /:drooling_face: $/, replace: "ðŸ¤¤ " },
  { find: /:sleeping: $/, replace: "ðŸ˜´ " },
  { find: /:mask: $/, replace: "ðŸ˜· " },
  { find: /:face_with_thermometer: $/, replace: "ðŸ¤’ " },
  { find: /:face_with_head_bandage: $/, replace: "ðŸ¤• " },
  { find: /:nauseated_face: $/, replace: "ðŸ¤¢ " },
  { find: /:vomiting_face: $/, replace: "ðŸ¤® " },
  { find: /:sneezing_face: $/, replace: "ðŸ¤§ " },
  { find: /:hot_face: $/, replace: "ðŸ¥µ " },
  { find: /:cold_face: $/, replace: "ðŸ¥¶ " },
  { find: /:woozy_face: $/, replace: "ðŸ¥´ " },
  { find: /:dizzy_face: $/, replace: "ðŸ˜µ " },
  { find: /:exploding_head: $/, replace: "ðŸ¤¯ " },
  { find: /:cowboy_hat_face: $/, replace: "ðŸ¤  " },
  { find: /:partying_face: $/, replace: "ðŸ¥³ " },
  { find: /:sunglasses: $/, replace: "ðŸ˜Ž " },
  { find: /:nerd_face: $/, replace: "ðŸ¤“ " },
  { find: /:monocle_face: $/, replace: "ðŸ§ " },
  { find: /:confused: $/, replace: "ðŸ˜• " },
  { find: /:worried: $/, replace: "ðŸ˜Ÿ " },
  { find: /:slightly_frowning_face: $/, replace: "ðŸ™ " },
  { find: /:frowning_face: $/, replace: "â˜¹ï¸ " },
  { find: /:open_mouth: $/, replace: "ðŸ˜® " },
  { find: /:hushed: $/, replace: "ðŸ˜¯ " },
  { find: /:astonished: $/, replace: "ðŸ˜² " },
  { find: /:flushed: $/, replace: "ðŸ˜³ " },
  { find: /:pleading_face: $/, replace: "ðŸ¥º " },
  { find: /:frowning: $/, replace: "ðŸ˜¦ " },
  { find: /:anguished: $/, replace: "ðŸ˜§ " },
  { find: /:fearful: $/, replace: "ðŸ˜¨ " },
  { find: /:cold_sweat: $/, replace: "ðŸ˜° " },
  { find: /:disappointed_relieved: $/, replace: "ðŸ˜¥ " },
  { find: /:cry: $/, replace: "ðŸ˜¢ " },
  { find: /:sob: $/, replace: "ðŸ˜­ " },
  { find: /:scream: $/, replace: "ðŸ˜± " },
  { find: /:confounded: $/, replace: "ðŸ˜– " },
  { find: /:persevere: $/, replace: "ðŸ˜£ " },
  { find: /:disappointed: $/, replace: "ðŸ˜ž " },
  { find: /:sweat: $/, replace: "ðŸ˜“ " },
  { find: /:weary: $/, replace: "ðŸ˜© " },
  { find: /:tired_face: $/, replace: "ðŸ˜« " },
  { find: /:yawning_face: $/, replace: "ðŸ¥± " },
  { find: /:triumph: $/, replace: "ðŸ˜¤ " },
  { find: /:rage: $/, replace: "ðŸ˜¡ " },
  { find: /:angry: $/, replace: "ðŸ˜  " },
  { find: /:cursing_face: $/, replace: "ðŸ¤¬ " },
  { find: /:smiling_imp: $/, replace: "ðŸ˜ˆ " },
  { find: /:imp: $/, replace: "ðŸ‘¿ " },
  { find: /:skull: $/, replace: "ðŸ’€ " },
  { find: /:skull_and_crossbones: $/, replace: "â˜ ï¸ " },
  { find: /:hankey: $/, replace: "ðŸ’© " },
  { find: /:clown_face: $/, replace: "ðŸ¤¡ " },
  { find: /:japanese_ogre: $/, replace: "ðŸ‘¹ " },
  { find: /:japanese_goblin: $/, replace: "ðŸ‘º " },
  { find: /:ghost: $/, replace: "ðŸ‘» " },
  { find: /:alien: $/, replace: "ðŸ‘½ " },
  { find: /:space_invader: $/, replace: "ðŸ‘¾ " },
  { find: /:robot: $/, replace: "ðŸ¤– " },
  { find: /:smiley_cat: $/, replace: "ðŸ˜º " },
  { find: /:smile_cat: $/, replace: "ðŸ˜¸ " },
  { find: /:joy_cat: $/, replace: "ðŸ˜¹ " },
  { find: /:heart_eyes_cat: $/, replace: "ðŸ˜» " },
  { find: /:smirk_cat: $/, replace: "ðŸ˜¼ " },
  { find: /:kissing_cat: $/, replace: "ðŸ˜½ " },
  { find: /:scream_cat: $/, replace: "ðŸ™€ " },
  { find: /:crying_cat_face: $/, replace: "ðŸ˜¿ " },
  { find: /:pouting_cat: $/, replace: "ðŸ˜¾ " },
  { find: /:palms_up_together: $/, replace: "ðŸ¤² " },
  { find: /:raised_hands: $/, replace: "ðŸ™Œ " },
  { find: /:clap: $/, replace: "ðŸ‘ " },
  { find: /:wave: $/, replace: "ðŸ‘‹ " },
  { find: /:call_me_hand: $/, replace: "ðŸ¤™ " },
  { find: /:thumbsup: $/, replace: "ðŸ‘ " },
  { find: /:thumbsdown: $/, replace: "ðŸ‘Ž " },
  { find: /:punch: $/, replace: "ðŸ‘Š " },
  { find: /:fist: $/, replace: "âœŠ " },
  { find: /:left_facing_fist: $/, replace: "ðŸ¤› " },
  { find: /:right_facing_fist: $/, replace: "ðŸ¤œ " },
  { find: /:raised_back_of_hand: $/, replace: "ðŸ¤š " },
  { find: /:hand_splayed: $/, replace: "ðŸ– " },
  { find: /:vulcan_salute: $/, replace: "ðŸ–– " },
  { find: /:ok_hand: $/, replace: "ðŸ‘Œ " },
  { find: /:pinched_fingers: $/, replace: "ðŸ¤Œ " },
  { find: /:pinching_hand: $/, replace: "ðŸ¤ " },
  { find: /:v: $/, replace: "âœŒï¸ " },
  { find: /:crossed_fingers: $/, replace: "ðŸ¤ž " },
  { find: /:love_you_gesture: $/, replace: "ðŸ¤Ÿ " },
  { find: /:metal: $/, replace: "ðŸ¤˜ " },
  { find: /:call_me: $/, replace: "ðŸ¤™ " },
  { find: /:point_left: $/, replace: "ðŸ‘ˆ " },
  { find: /:point_right: $/, replace: "ðŸ‘‰ " },
  { find: /:point_up_2: $/, replace: "ðŸ‘† " },
  { find: /:middle_finger: $/, replace: "ðŸ–• " },
  { find: /:point_down: $/, replace: "ðŸ‘‡ " },
  { find: /:point_up: $/, replace: "â˜ï¸ " },
  { find: /:thumbsup: $/, replace: "ðŸ‘ " },
  { find: /:thumbsdown: $/, replace: "ðŸ‘Ž " },
  { find: /:fingers_crossed: $/, replace: "ðŸ¤ž " },
  { find: /:vulcan_salute: $/, replace: "ðŸ–– " },
  { find: /:clap: $/, replace: "ðŸ‘ " },
  { find: /:raised_hands: $/, replace: "ðŸ™Œ " },
  { find: /:open_hands: $/, replace: "ðŸ‘ " },
  { find: /:palms_up_together: $/, replace: "ðŸ¤² " },
  { find: /:handshake: $/, replace: "ðŸ¤ " },
  { find: /:pray: $/, replace: "ðŸ™ " },
  { find: /:writing_hand: $/, replace: "âœï¸ " },
  { find: /:nail_care: $/, replace: "ðŸ’… " },
  { find: /:selfie: $/, replace: "ðŸ¤³ " },
  { find: /:muscle: $/, replace: "ðŸ’ª " },
  { find: /:mechanical_arm: $/, replace: "ðŸ¦¾ " },
  { find: /:mechanical_leg: $/, replace: "ðŸ¦¿ " },
  { find: /:leg: $/, replace: "ðŸ¦µ " },
  { find: /:foot: $/, replace: "ðŸ¦¶ " },
  { find: /:ear: $/, replace: "ðŸ‘‚ " },
  { find: /:ear_with_hearing_aid: $/, replace: "ðŸ¦» " },
  { find: /:nose: $/, replace: "ðŸ‘ƒ " },
  { find: /:brain: $/, replace: "ðŸ§  " },
  { find: /:tooth: $/, replace: "ðŸ¦· " },
  { find: /:skull: $/, replace: "ðŸ’€ " },
];

export type EmojisOptions = {
  emojiReplacements?: EmojiReplacement[];

  /**
   * How to handle the emoji replacements.
   * @default "merge"
   */
  mode: "merge" | "override";
};

export const Emojis = Mark.create<EmojisOptions>({
  name: "EddiesEmojis",

  addOptions() {
    return {
      emojiReplacements: emojiReplacements,
      mode: "merge",
    };
  },

  addInputRules() {
    const replacements =
      this.options?.mode === "merge"
        ? [...emojiReplacements, ...this.options?.emojiReplacements!]
        : this.options?.emojiReplacements!;

    return replacements!.map((emojiReplacement) => {
      return textInputRule({
        find: emojiReplacement.find,
        replace: emojiReplacement.replace,
      });
    });
  },
});
